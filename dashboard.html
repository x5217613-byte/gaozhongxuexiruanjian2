<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>хнжф╣аф╗кшбичЫШ</title>
  <link rel="stylesheet" href="assets/theme.css">
  <link rel="stylesheet" href="assets/components.css">
  <link rel="stylesheet" href="assets/layout.css">
<link rel="stylesheet" href="assets/sidebar_plus.css">
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#3a7afe">
</head>
<body>
  <script src="assets/theme.js"></script>
  <script src="assets/layout.js"></script>
  <div class="app-container main-with-sidebar">
    <div class="container stack">
      <h2>хнжф╣аф╗кшбичЫШ</h2>
      <div class="grid cols-3">
        <div class="card" id="card-plan">
          <div class="row"><b>ЁЯУЕ ф╗КцЧешобхИТ</b><span class="badge" id="plan-badge">тАФ</span></div>
          <div id="plan-list" class="stack"></div>
        </div>
        <div class="card" id="card-progress">
          <div class="row"><b>ЁЯУИ хнжф╣аш┐Ых║ж</b></div>
          <div class="stack" id="progress-list"></div>
        </div>
        <div class="card" id="card-wrong">
          <div class="row"><b>ЁЯУЪ щФЩщвШч╗Яшоб</b></div>
          <div class="stack" id="wrong-list"></div>
        </div>
      </div>
      <div class="card">
        <div class="tabs">
          <div class="tab active" data-t="english">шЛ▒шпн</div>
          <div class="tab" data-t="math">цХ░хнж</div>
          <div class="tab" data-t="chinese">шпнцЦЗ</div>
        </div>
        <div class="tabpanes">
          <div class="pane active" id="pane-english"><div class="en-reading">Reading practice is <b>essential</b> for fluency and comprehension.</div></div>
          <div class="pane" id="pane-math"><div class="q-item"><div class="title">ф╗КцЧехРМцне ┬╖ хЗ╜цХ░хЯ║чбА</div><div>щАЙцЛй + хблчй║ + шобчоЧ</div></div></div>
          <div class="pane" id="pane-chinese"><div class="q-item"><div class="title">цЭРцЦЩщвШ ┬╖ шо║чВ╣цжВцЛм</div><div>20 хИЖщТЯхоЪцЧ╢шонч╗Г</div></div></div>
        </div>
      </div>
    </div>
  </div>
  <script src="assets/english_read_aloud.js"></script>
  <script src="assets/english_read_aloud_plus.js"></script>
  <script>
    // Simple tabs
    const tabs = document.querySelectorAll('.tab'); const panes=document.querySelectorAll('.pane');
    tabs.forEach(t=> t.onclick = ()=>{ tabs.forEach(x=>x.classList.remove('active')); t.classList.add('active'); panes.forEach(p=> p.classList.toggle('active','pane-'+t.dataset.t===p.id)); });

    // Plan (read from /data/plans/ if served statically; fallback to hints)
    async function readJSON(path){
      try{ const r = await fetch(path); if (r.ok) return await r.json(); }catch(e){} return null;
    }
    (async function(){
      const today = new Date();
      const idx = today.getDay()===0 ? 7 : today.getDay(); // 1-7
      let plan = await readJSON('data/plans/weekly_plan_english.json');
      if (!plan){ document.getElementById('plan-badge').textContent='цЧашобхИТ'; return; }
      document.getElementById('plan-badge').textContent = plan.week_label || 'Week Plan';
      const d = (plan.days||[]).find(x=> x.day===idx) || plan.days?.[0] || {};
      const list = document.getElementById('plan-list');
      list.innerHTML = Object.keys(d).filter(k=>k!=='day').map(k=> `<div>┬╖ <b>${k}</b>я╝Ъ${d[k]}</div>`).join('');

      // progress (mock from localStorage counters)
      const progBox = document.getElementById('progress-list');
      const prog = JSON.parse(localStorage.getItem('study_progress')||'{}');
      const ent = Object.entries(prog).slice(0,6);
      progBox.innerHTML = ent.length ? ent.map(([k,v])=> `<div class="row"><span class="tag"><span class="dot"></span>${k}</span><b>${v}</b></div>`).join('') : '<div class="muted">цЪВцЧаш┐Ых║жцХ░цНо</div>';

      // wrong stats
      const rev = JSON.parse(localStorage.getItem('review_items')||'{}');
      let count=0; Object.values(rev).forEach(arr=> count+= (arr||[]).length);
      document.getElementById('wrong-list').innerHTML = `<div class="row"><span class="tag"><span class="dot"></span>ч┤пшобщФЩщвШ</span><b>${count}</b></div>`;
    })();
  </script>
<script src="assets/layout_plus.js"></script>
<script src="assets/theme_customizer.js"></script>
<script src="assets/shortcuts.js"></script>
<script src="assets/charts.js"></script>
<script src="assets/tiny_pdf_bookmarks.js"></script>
<script src="assets/wrongbook_pdf_export_bookmarks.js"></script>
</body>
</html>
